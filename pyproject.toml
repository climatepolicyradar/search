[project]
name = "search"
version = "0.1.0"
description = "Tests for measuring the relevance of our search results"
readme = "README.md"
requires-python = ">=3.13"
dependencies = [
  "boto3>=1.35.0",
  "duckdb>=1.4.2",
  "fastapi[standard]>=0.115.0",
  "knowledge-graph @ git+https://github.com/climatepolicyradar/knowledge-graph@268d1baa221b8da51f88bc7affa31b4860da8dd0",
  "posthog>=7.5.1",
  "prefect>=3.4.25",
  "pydantic>=2.12.4",
  "python-dotenv>=1.0.0",
  "pyvespa>=0.62.0",
  "requests>=2.32.5",
  "rich>=13.9.4",
  "typer>=0.15.1",
  "uvicorn>=0.32.0",
]

[dependency-groups]
dev = [
  "pre-commit>=3.5.0",
  "pulumi-aws>=7.0.0,<8.0.0",
  "pulumi-docker>=4.0.0,<5.0.0",
  "pulumi>=3.0.0,<4.0.0",
  "pytest>=9.0.1",
  "ruff>=0.12.9",
  "hypothesis>=6.0.0",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.metadata]
allow-direct-references = true

[tool.hatch.build.targets.wheel]
packages = ["search"]

[tool.pytest.ini_options]
testpaths = ["tests"]

[tool.pylint."messages control"]
disable = ["logging-fstring-interpolation"] # W1203: allow f-strings in logging

[tool.pylint.'tests/*']
disable = [
  "C0115",
  "C0116", # test function names should be descriptive enough to understand the test's purpose, without always needing a docstring
]

[tool.typos.files]
extend-exclude = ["relevance_tests/*.py"]
