schema documents {
    document documents {
        field id type string {}
        field title type string {}
        field description type string {}

        struct label {
            field id type string {}
            field type type string {}
            field title type string {}
            field timestamp type long {}
            field relationship type string {}
        }
        field labels type array<label> {}

        struct passage {
            field text_block_id type string {}
            field language type string {}
            field type type string {}
            field type_confidence type float {}
            field page_number type int {}
            field text type string {}
        }
        field passages type array<passage> {}

        field source type string {
            indexing: summary
        }
    }

    field labels_title type array<string> {
        indexing: input labels | for_each { get_field title } | index
    }

    field labels_title_attribute type array<string> {
        indexing: input labels | for_each { get_field title } | attribute
        attribute: fast-search
    }

    field labels_type_attribute type array<string> {
        indexing: input labels | for_each { get_field type } | attribute
        attribute: fast-search
    }

    field passages_text type array<string> {
        indexing: input passages | for_each { get_field text } | index
    }

    fieldset default {
        fields: title, description, labels_title, passages_text
    }
}
