schema documents {
    document documents {
        field id type string {}
        field title type string {}
        field description type string {}

        struct label {
            field id type string {}
            field type type string {}
            field value type string {}
            field timestamp type long {}
            field relationship type string {}
        }
        field labels type array<label> {}

        struct attribute {
            field type type string {}
            field key type string {}
            field value type string {}
        }
        field attributes type array<attribute> {}

        field attributes_number type map<string, double> {
            indexing: attribute
        }
        field attributes_string type map<string, string> {
            indexing: attribute
        }
        field attributes_boolean type map<string, bool> {
            indexing: attribute
        }

        struct passage {
            field text_block_id type string {}
            field language type string {}
            field type type string {}
            field type_confidence type float {}
            field page_number type int {}
            field text type string {}
        }
        field passages type array<passage> {}

        field source type string {
            indexing: summary
        }
    }

    field labels_value type array<string> {
        indexing: input labels | for_each { get_field value } | index
    }

    field labels_value_attribute type array<string> {
        indexing: input labels | for_each { get_field value } | attribute
        attribute: fast-search
    }


    field passages_text type array<string> {
        indexing: input passages | for_each { get_field text } | index
    }

    fieldset default {
        fields: title, description, labels_value, passages_text
    }
}
